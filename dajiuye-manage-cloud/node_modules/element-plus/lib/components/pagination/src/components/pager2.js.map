{"version":3,"file":"pager2.js","sources":["../../../../../../../packages/components/pagination/src/components/pager.vue"],"sourcesContent":["<template>\n  <ul :class=\"nsPager.b()\" @click=\"onPagerClick\" @keyup.enter=\"onEnter\">\n    <li\n      v-if=\"pageCount > 0\"\n      :class=\"[\n        nsPager.is('active', currentPage === 1),\n        nsPager.is('disabled', disabled),\n      ]\"\n      class=\"number\"\n      :aria-current=\"currentPage === 1\"\n      :tabindex=\"tabindex\"\n    >\n      1\n    </li>\n    <li\n      v-if=\"showPrevMore\"\n      :class=\"[\n        'more',\n        'btn-quickprev',\n        nsIcon.b(),\n        nsPager.is('disabled', disabled),\n      ]\"\n      :tabindex=\"tabindex\"\n      @mouseenter=\"onMouseEnter(true)\"\n      @mouseleave=\"quickPrevHover = false\"\n      @focus=\"onFocus(true)\"\n      @blur=\"quickPrevFocus = false\"\n    >\n      <d-arrow-left v-if=\"quickPrevHover || quickPrevFocus\" />\n      <more-filled v-else />\n    </li>\n    <li\n      v-for=\"pager in pagers\"\n      :key=\"pager\"\n      :class=\"[\n        nsPager.is('active', currentPage === pager),\n        nsPager.is('disabled', disabled),\n      ]\"\n      class=\"number\"\n      :aria-current=\"currentPage === pager\"\n      :tabindex=\"tabindex\"\n    >\n      {{ pager }}\n    </li>\n    <li\n      v-if=\"showNextMore\"\n      :class=\"[\n        'more',\n        'btn-quicknext',\n        nsIcon.b(),\n        nsPager.is('disabled', disabled),\n      ]\"\n      :tabindex=\"tabindex\"\n      @mouseenter=\"onMouseEnter()\"\n      @mouseleave=\"quickNextHover = false\"\n      @focus=\"onFocus()\"\n      @blur=\"quickNextFocus = false\"\n    >\n      <d-arrow-right v-if=\"quickNextHover || quickNextFocus\" />\n      <more-filled v-else />\n    </li>\n    <li\n      v-if=\"pageCount > 1\"\n      :class=\"[\n        nsPager.is('active', currentPage === pageCount),\n        nsPager.is('disabled', disabled),\n      ]\"\n      class=\"number\"\n      :aria-current=\"currentPage === pageCount\"\n      :tabindex=\"tabindex\"\n    >\n      {{ pageCount }}\n    </li>\n  </ul>\n</template>\n<script lang=\"ts\" setup>\nimport { computed, ref, watchEffect } from 'vue'\nimport { DArrowLeft, DArrowRight, MoreFilled } from '@element-plus/icons-vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { paginationPagerProps } from './pager'\ndefineOptions({\n  name: 'ElPaginationPager',\n})\nconst props = defineProps(paginationPagerProps)\nconst emit = defineEmits(['change'])\nconst nsPager = useNamespace('pager')\nconst nsIcon = useNamespace('icon')\nconst showPrevMore = ref(false)\nconst showNextMore = ref(false)\nconst quickPrevHover = ref(false)\nconst quickNextHover = ref(false)\nconst quickPrevFocus = ref(false)\nconst quickNextFocus = ref(false)\nconst pagers = computed(() => {\n  const pagerCount = props.pagerCount\n  const halfPagerCount = (pagerCount - 1) / 2\n  const currentPage = Number(props.currentPage)\n  const pageCount = Number(props.pageCount)\n  let showPrevMore = false\n  let showNextMore = false\n  if (pageCount > pagerCount) {\n    if (currentPage > pagerCount - halfPagerCount) {\n      showPrevMore = true\n    }\n    if (currentPage < pageCount - halfPagerCount) {\n      showNextMore = true\n    }\n  }\n  const array: number[] = []\n  if (showPrevMore && !showNextMore) {\n    const startPage = pageCount - (pagerCount - 2)\n    for (let i = startPage; i < pageCount; i++) {\n      array.push(i)\n    }\n  } else if (!showPrevMore && showNextMore) {\n    for (let i = 2; i < pagerCount; i++) {\n      array.push(i)\n    }\n  } else if (showPrevMore && showNextMore) {\n    const offset = Math.floor(pagerCount / 2) - 1\n    for (let i = currentPage - offset; i <= currentPage + offset; i++) {\n      array.push(i)\n    }\n  } else {\n    for (let i = 2; i < pageCount; i++) {\n      array.push(i)\n    }\n  }\n  return array\n})\nconst tabindex = computed(() => (props.disabled ? -1 : 0))\nwatchEffect(() => {\n  const halfPagerCount = (props.pagerCount - 1) / 2\n  showPrevMore.value = false\n  showNextMore.value = false\n  if (props.pageCount! > props.pagerCount) {\n    if (props.currentPage > props.pagerCount - halfPagerCount) {\n      showPrevMore.value = true\n    }\n    if (props.currentPage < props.pageCount! - halfPagerCount) {\n      showNextMore.value = true\n    }\n  }\n})\nfunction onMouseEnter(forward = false) {\n  if (props.disabled) return\n  if (forward) {\n    quickPrevHover.value = true\n  } else {\n    quickNextHover.value = true\n  }\n}\nfunction onFocus(forward = false) {\n  if (forward) {\n    quickPrevFocus.value = true\n  } else {\n    quickNextFocus.value = true\n  }\n}\nfunction onEnter(e: UIEvent) {\n  const target = e.target as HTMLElement\n  if (\n    target.tagName.toLowerCase() === 'li' &&\n    Array.from(target.classList).includes('number')\n  ) {\n    const newPage = Number(target.textContent)\n    if (newPage !== props.currentPage) {\n      emit('change', newPage)\n    }\n  } else if (\n    target.tagName.toLowerCase() === 'li' &&\n    Array.from(target.classList).includes('more')\n  ) {\n    onPagerClick(e)\n  }\n}\nfunction onPagerClick(event: UIEvent) {\n  const target = event.target as HTMLElement\n  if (target.tagName.toLowerCase() === 'ul' || props.disabled) {\n    return\n  }\n  let newPage = Number(target.textContent)\n  const pageCount = props.pageCount!\n  const currentPage = props.currentPage\n  const pagerCountOffset = props.pagerCount - 2\n  if (target.className.includes('more')) {\n    if (target.className.includes('quickprev')) {\n      newPage = currentPage - pagerCountOffset\n    } else if (target.className.includes('quicknext')) {\n      newPage = currentPage + pagerCountOffset\n    }\n  }\n  if (!Number.isNaN(+newPage)) {\n    if (newPage < 1) {\n      newPage = 1\n    }\n    if (newPage > pageCount) {\n      newPage = pageCount\n    }\n  }\n  if (newPage !== currentPage) {\n    emit('change', newPage)\n  }\n}\n</script>\n"],"names":["useNamespace","ref","computed","watchEffect"],"mappings":"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"}